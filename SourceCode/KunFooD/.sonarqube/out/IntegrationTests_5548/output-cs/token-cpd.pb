©ì
tC:\Users\Turcu Nicusor\Desktop\Work\Anul 3\DotNet\KunFooD\SourceCode\KunFooD\IntegrationTests\BaseIntegrationTest.cs
	namespace 	
IntegrationTests
 
{ 
public 

abstract 
class 
BaseIntegrationTest -
{ 
	protected 
virtual 
bool 
UseSqlServer +
=>, .
false/ 4
;4 5
[ 	
TestInitialize	 
] 
public 
virtual 
void 
TestInitialize *
(* +
)+ ,
{ 	
DestroyDatabase 
( 
) 
; 
CreateDatabase 
( 
) 
; 
} 	
[ 	
TestCleanup	 
] 
public 
virtual 
void 
TestCleanup '
(' (
)( )
{ 	
DestroyDatabase 
( 
) 
; 
} 	
	protected 
void 
RunOnDatabase $
($ %
Action% +
<+ ,
DatabaseContext, ;
>; <
databaseAction= K
)K L
{ 	
if   
(   
UseSqlServer   
)   
RunOnSqlServer   ,
(  , -
databaseAction  - ;
)  ; <
;  < =
else!! 
RunOnMemory!! 
(!! 
databaseAction!! +
)!!+ ,
;!!, -
}"" 	
private$$ 
void$$ 
RunOnSqlServer$$ #
($$# $
Action$$$ *
<$$* +
DatabaseContext$$+ :
>$$: ;
databaseAction$$< J
)$$J K
{%% 	
var&& 

connection&& 
=&& 
$str&& u
;&&u v
var(( 
options(( 
=(( 
new(( #
DbContextOptionsBuilder(( 5
<((5 6
DatabaseContext((6 E
>((E F
(((F G
)((G H
.)) 
UseSqlServer)) 
()) 

connection)) (
)))( )
.** 
Options** 
;** 
using,, 
(,, 
var,, 
context,, 
=,,  
new,,! $
DatabaseContext,,% 4
(,,4 5
options,,5 <
),,< =
),,= >
{-- 
databaseAction.. 
(.. 
context.. &
)..& '
;..' (
}// 
}00 	
private22 
void22 
RunOnMemory22  
(22  !
Action22! '
<22' (
DatabaseContext22( 7
>227 8
databaseAction229 G
)22G H
{33 	
var44 
options44 
=44 
new44 #
DbContextOptionsBuilder44 5
<445 6
DatabaseContext446 E
>44E F
(44F G
)44G H
.55 
UseInMemoryDatabase55 $
(55$ %
$str55% 2
)552 3
.66 
Options66 
;66 
using88 
(88 
var88 
context88 
=88  
new88! $
DatabaseContext88% 4
(884 5
options885 <
)88< =
)88= >
{99 
databaseAction:: 
(:: 
context:: &
)::& '
;::' (
};; 
}<< 	
private>> 
void>> 
CreateDatabase>> #
(>># $
)>>$ %
{?? 	
RunOnDatabase@@ 
(@@ 
context@@ !
=>@@" $
context@@% ,
.@@, -
Database@@- 5
.@@5 6
EnsureCreated@@6 C
(@@C D
)@@D E
)@@E F
;@@F G
}AA 	
publicCC 
voidCC 
DestroyDatabaseCC #
(CC# $
)CC$ %
{DD 	
RunOnDatabaseEE 
(EE 
contextEE !
=>EE" $
contextEE% ,
.EE, -
DatabaseEE- 5
.EE5 6
EnsureDeletedEE6 C
(EEC D
)EED E
)EEE F
;EEF G
}FF 	
publicHH 
staticHH 
IEnumerableHH !
<HH! "
UserHH" &
>HH& '
GetDefaultUsersHH( 7
(HH7 8
intHH8 ;
countHH< A
=HHB C
$numHHD E
)HHE F
{II 	
ListJJ 
<JJ 
UserJJ 
>JJ 
usersJJ 
=JJ 
newJJ "
ListJJ# '
<JJ' (
UserJJ( ,
>JJ, -
{KK 
UserLL 
.LL 
CreateLL 
(LL 
$strLL #
,LL# $
trueLL% )
,LL) *
$strLL+ 9
,LL9 :
$strLL; G
,LLG H
$strLLI Y
,LLY Z
$strLL[ h
)LLh i
,LLi j
UserMM 
.MM 
CreateMM 
(MM 
$strMM #
,MM# $
trueMM% )
,MM) *
$strMM+ 9
,MM9 :
$strMM; G
,MMG H
$strMMI Y
,MMY Z
$strMM[ h
)MMh i
,MMi j
UserNN 
.NN 
CreateNN 
(NN 
$strNN #
,NN# $
falseNN% *
,NN* +
$strNN, :
,NN: ;
$strNN< H
,NNH I
$strNNJ Z
,NNZ [
$strNN\ i
)NNi j
,NNj k
UserOO 
.OO 
CreateOO 
(OO 
$strOO #
,OO# $
trueOO% )
,OO) *
$strOO+ 9
,OO9 :
$strOO; G
,OOG H
$strOOI Y
,OOY Z
$strOO[ h
)OOh i
,OOi j
UserPP 
.PP 
CreatePP 
(PP 
$strPP #
,PP# $
falsePP% *
,PP* +
$strPP, :
,PP: ;
$strPP< H
,PPH I
$strPPJ Z
,PPZ [
$strPP\ i
)PPi j
}QQ 
;QQ 
ifRR 
(RR 
$numRR 
>=RR 
countRR 
)RR 
throwRR !
newRR" %$
IndexOutOfRangeExceptionRR& >
(RR> ?
$strRR? v
)RRv w
;RRw x
ifSS 
(SS 
usersSS 
.SS 
CountSS 
<SS 
countSS #
)SS# $
throwSS% *
newSS+ .$
IndexOutOfRangeExceptionSS/ G
(SSG H
$str	SSH Ü
)
SSÜ á
;
SSá à
returnTT 
usersTT 
.TT 
TakeTT 
(TT 
countTT #
)TT# $
;TT$ %
}UU 	
publicWW 
staticWW 
IEnumerableWW !
<WW! "
PairItemWW" *
>WW* +
GetPairItemsWW, 8
(WW8 9
intWW9 <
countWW= B
=WWC D
$numWWE F
)WWF G
{XX 	
ListYY 
<YY 
PairItemYY 
>YY 
itemsYY  
=YY! "
newYY# &
ListYY' +
<YY+ ,
PairItemYY, 4
>YY4 5
{ZZ 
PairItem[[ 
.[[ 
Create[[ 
([[  
Guid[[  $
.[[$ %
NewGuid[[% ,
([[, -
)[[- .
,[[. /
Guid[[0 4
.[[4 5
NewGuid[[5 <
([[< =
)[[= >
,[[> ?
$num[[@ D
)[[D E
,[[E F
PairItem\\ 
.\\ 
Create\\ 
(\\  
Guid\\  $
.\\$ %
NewGuid\\% ,
(\\, -
)\\- .
,\\. /
Guid\\0 4
.\\4 5
NewGuid\\5 <
(\\< =
)\\= >
,\\> ?
$num\\@ D
)\\D E
,\\E F
PairItem]] 
.]] 
Create]] 
(]]  
Guid]]  $
.]]$ %
NewGuid]]% ,
(]], -
)]]- .
,]]. /
Guid]]0 4
.]]4 5
NewGuid]]5 <
(]]< =
)]]= >
,]]> ?
$num]]@ D
)]]D E
,]]E F
PairItem^^ 
.^^ 
Create^^ 
(^^  
Guid^^  $
.^^$ %
NewGuid^^% ,
(^^, -
)^^- .
,^^. /
Guid^^0 4
.^^4 5
NewGuid^^5 <
(^^< =
)^^= >
,^^> ?
$num^^@ D
)^^D E
,^^E F
PairItem__ 
.__ 
Create__ 
(__  
Guid__  $
.__$ %
NewGuid__% ,
(__, -
)__- .
,__. /
Guid__0 4
.__4 5
NewGuid__5 <
(__< =
)__= >
,__> ?
$num__@ D
)__D E
,__E F
PairItem`` 
.`` 
Create`` 
(``  
Guid``  $
.``$ %
NewGuid``% ,
(``, -
)``- .
,``. /
Guid``0 4
.``4 5
NewGuid``5 <
(``< =
)``= >
,``> ?
$num``@ D
)``D E
}aa 
;aa 
ifbb 
(bb 
$numbb 
>=bb 
countbb 
)bb 
throwbb !
newbb" %$
IndexOutOfRangeExceptionbb& >
(bb> ?
$strbb? v
)bbv w
;bbw x
ifcc 
(cc 
itemscc 
.cc 
Countcc 
<cc 
countcc #
)cc# $
throwcc% *
newcc+ .$
IndexOutOfRangeExceptioncc/ G
(ccG H
$str	ccH ã
)
ccã å
;
ccå ç
returndd 
itemsdd 
.dd 
Takedd 
(dd 
countdd #
)dd# $
;dd$ %
}ee 	
publicgg 
staticgg 
IEnumerablegg !
<gg! "
IngredientCategorygg" 4
>gg4 5 
GetDefaultCategoriesgg6 J
(ggJ K
)ggK L
{hh 	
Listii 
<ii 
IngredientCategoryii #
>ii# $

categoriesii% /
=ii0 1
newii2 5
Listii6 :
<ii: ;
IngredientCategoryii; M
>iiM N
{jj 
IngredientCategorykk "
.kk" #
Createkk# )
(kk) *
$strkk* :
)kk: ;
,kk; <
IngredientCategoryll "
.ll" #
Createll# )
(ll) *
$strll* ;
)ll; <
,ll< =
IngredientCategorymm "
.mm" #
Createmm# )
(mm) *
$strmm* :
)mm: ;
,mm; <
IngredientCategorynn "
.nn" #
Createnn# )
(nn) *
$strnn* 8
)nn8 9
,nn9 :
IngredientCategoryoo "
.oo" #
Createoo# )
(oo) *
$stroo* 8
)oo8 9
,oo9 :
IngredientCategorypp "
.pp" #
Createpp# )
(pp) *
$strpp* =
)pp= >
}qq 
;qq 
returnrr 

categoriesrr 
;rr 
}ss 	
publictt 
statictt 
asynctt 
voidtt  
Populatett! )
(tt) *
DatabaseContexttt* 9
stt: ;
)tt; <
{uu 	
varvv 
categoryRepovv 
=vv 
newvv ")
IngredientsCategoryRepositoryvv# @
(vv@ A
svvA B
)vvB C
;vvC D
IEnumerableww 
<ww 
IngredientCategoryww *
>ww* +

categoriesww, 6
=ww7 8 
GetDefaultCategoriesww9 M
(wwM N
)wwN O
;wwO P
foreachyy 
(yy 
varyy 
ingredientCategoryyy +
inyy, .

categoriesyy/ 9
)yy9 :
{zz 
await{{ 
categoryRepo{{ "
.{{" #
Add{{# &
({{& '
ingredientCategory{{' 9
){{9 :
;{{: ;
}|| 
var}} 
fridgeRepos}} 
=}} 
new}} !
FridgeRepository}}" 2
(}}2 3
s}}3 4
)}}4 5
;}}5 6
var~~ 
ingredientRepo~~ 
=~~  
new~~! $!
IngredientsRepository~~% :
(~~: ;
s~~; <
,~~< =
categoryRepo~~> J
,~~J K
fridgeRepos~~L W
)~~W X
;~~X Y
var 

recipeRepo 
= 
new  
RecipesRepository! 2
(2 3
s3 4
,4 5
fridgeRepos6 A
,A B
ingredientRepoC Q
)Q R
;R S

Ingredient
ÅÅ 
i1
ÅÅ 
=
ÅÅ 

Ingredient
ÅÅ &
.
ÅÅ& '
Create
ÅÅ' -
(
ÅÅ- .

categories
ÅÅ. 8
.
ÅÅ8 9
First
ÅÅ9 >
(
ÅÅ> ?
)
ÅÅ? @
.
ÅÅ@ A
Id
ÅÅA C
,
ÅÅC D
$str
ÅÅE I
,
ÅÅI J
$str
ÅÅK P
,
ÅÅP Q
$num
ÅÅR U
)
ÅÅU V
;
ÅÅV W

Ingredient
ÇÇ 
i2
ÇÇ 
=
ÇÇ 

Ingredient
ÇÇ &
.
ÇÇ& '
Create
ÇÇ' -
(
ÇÇ- .

categories
ÇÇ. 8
.
ÇÇ8 9
First
ÇÇ9 >
(
ÇÇ> ?
)
ÇÇ? @
.
ÇÇ@ A
Id
ÇÇA C
,
ÇÇC D
$str
ÇÇE I
,
ÇÇI J
$str
ÇÇK R
,
ÇÇR S
$num
ÇÇT W
)
ÇÇW X
;
ÇÇX Y

Ingredient
ÉÉ 
i3
ÉÉ 
=
ÉÉ 

Ingredient
ÉÉ &
.
ÉÉ& '
Create
ÉÉ' -
(
ÉÉ- .

categories
ÉÉ. 8
.
ÉÉ8 9
First
ÉÉ9 >
(
ÉÉ> ?
)
ÉÉ? @
.
ÉÉ@ A
Id
ÉÉA C
,
ÉÉC D
$str
ÉÉE I
,
ÉÉI J
$str
ÉÉK R
,
ÉÉR S
$num
ÉÉT W
)
ÉÉW X
;
ÉÉX Y

Ingredient
ÑÑ 
i4
ÑÑ 
=
ÑÑ 

Ingredient
ÑÑ &
.
ÑÑ& '
Create
ÑÑ' -
(
ÑÑ- .

categories
ÑÑ. 8
.
ÑÑ8 9
First
ÑÑ9 >
(
ÑÑ> ?
)
ÑÑ? @
.
ÑÑ@ A
Id
ÑÑA C
,
ÑÑC D
$str
ÑÑE I
,
ÑÑI J
$str
ÑÑK P
,
ÑÑP Q
$num
ÑÑR T
)
ÑÑT U
;
ÑÑU V
User
ÖÖ 
user
ÖÖ 
=
ÖÖ 
User
ÖÖ 
.
ÖÖ 
Create
ÖÖ #
(
ÖÖ# $
$str
ÖÖ$ (
,
ÖÖ( )
true
ÖÖ* .
,
ÖÖ. /
$str
ÖÖ0 ?
,
ÖÖ? @
$str
ÖÖA E
,
ÖÖE F
$str
ÖÖG O
,
ÖÖO P
$str
ÖÖQ Y
)
ÖÖY Z
;
ÖÖZ [
var
áá 
userRepo
áá 
=
áá 
new
áá 
UsersRepository
áá .
(
áá. /
s
áá/ 0
)
áá0 1
;
áá1 2
await
àà 
userRepo
àà 
.
àà 
Add
àà 
(
àà 
user
àà #
)
àà# $
;
àà$ %
await
ää 
ingredientRepo
ää  
.
ää  !
Add
ää! $
(
ää$ %
i1
ää% '
)
ää' (
;
ää( )
await
ãã 
ingredientRepo
ãã  
.
ãã  !
Add
ãã! $
(
ãã$ %
i2
ãã% '
)
ãã' (
;
ãã( )
await
åå 
ingredientRepo
åå  
.
åå  !
Add
åå! $
(
åå$ %
i3
åå% '
)
åå' (
;
åå( )
await
çç 
ingredientRepo
çç  
.
çç  !
Add
çç! $
(
çç$ %
i4
çç% '
)
çç' (
;
çç( )
Recipe
èè 
recipe1
èè 
=
èè 
Recipe
èè #
.
èè# $
Create
èè$ *
(
èè* +
user
èè+ /
.
èè/ 0
Id
èè0 2
,
èè2 3
$str
èè4 8
,
èè8 9
$str
èè: B
,
èèB C
RecipeStatusType
èèD T
.
èèT U
Approved
èèU ]
,
èè] ^
$num
èè_ a
,
èèa b
$num
èèc d
,
èèd e
KitchenType
èèf q
.
èèq r
Asian
èèr w
)
èèw x
;
èèx y
Recipe
êê 
recipe2
êê 
=
êê 
Recipe
êê #
.
êê# $
Create
êê$ *
(
êê* +
user
êê+ /
.
êê/ 0
Id
êê0 2
,
êê2 3
$str
êê4 8
,
êê8 9
$str
êê: C
,
êêC D
RecipeStatusType
êêE U
.
êêU V
Approved
êêV ^
,
êê^ _
$num
êê` b
,
êêb c
$num
êêd e
,
êêe f
KitchenType
êêg r
.
êêr s
Unspecified
êês ~
)
êê~ 
;êê Ä
await
ëë 

recipeRepo
ëë 
.
ëë 
Add
ëë  
(
ëë  !
recipe1
ëë! (
)
ëë( )
;
ëë) *
await
íí 

recipeRepo
íí 
.
íí 
Add
íí  
(
íí  !
recipe2
íí! (
)
íí( )
;
íí) *
await
ìì 

recipeRepo
ìì 
.
ìì 
UpdateAllCosts
ìì +
(
ìì+ ,
)
ìì, -
;
ìì- .
await
ïï 
fridgeRepos
ïï 
.
ïï 
Add
ïï !
(
ïï! "
PairItem
ïï" *
.
ïï* +
Create
ïï+ 1
(
ïï1 2
i1
ïï2 4
.
ïï4 5
Id
ïï5 7
,
ïï7 8
recipe1
ïï9 @
.
ïï@ A
Id
ïïA C
,
ïïC D
$num
ïïE F
)
ïïF G
)
ïïG H
;
ïïH I
await
ññ 
fridgeRepos
ññ 
.
ññ 
Add
ññ !
(
ññ! "
PairItem
ññ" *
.
ññ* +
Create
ññ+ 1
(
ññ1 2
i2
ññ2 4
.
ññ4 5
Id
ññ5 7
,
ññ7 8
recipe1
ññ9 @
.
ññ@ A
Id
ññA C
,
ññC D
$num
ññE F
)
ññF G
)
ññG H
;
ññH I
await
óó 
fridgeRepos
óó 
.
óó 
Add
óó !
(
óó! "
PairItem
óó" *
.
óó* +
Create
óó+ 1
(
óó1 2
i3
óó2 4
.
óó4 5
Id
óó5 7
,
óó7 8
recipe1
óó9 @
.
óó@ A
Id
óóA C
,
óóC D
$num
óóE F
)
óóF G
)
óóG H
;
óóH I
await
òò 
fridgeRepos
òò 
.
òò 
Add
òò !
(
òò! "
PairItem
òò" *
.
òò* +
Create
òò+ 1
(
òò1 2
i1
òò2 4
.
òò4 5
Id
òò5 7
,
òò7 8
recipe2
òò9 @
.
òò@ A
Id
òòA C
,
òòC D
$num
òòE F
)
òòF G
)
òòG H
;
òòH I
}
ôô 	
}
öö 
}õõ ﬁ
|C:\Users\Turcu Nicusor\Desktop\Work\Anul 3\DotNet\KunFooD\SourceCode\KunFooD\IntegrationTests\ForumCategoryRepositoryTest.cs
	namespace 	
IntegrationTests
 
{ 
[ 
	TestClass 
] 
public		 

class		 '
ForumCategoryRepositoryTest		 ,
:		- .
BaseIntegrationTest		/ B
{

 
[ 	

TestMethod	 
] 
public 
void 
TestContructor "
(" #
)# $
{ 	
RunOnDatabase 
( 
async 
s  !
=>" $
{ 
DestroyDatabase 
(  
)  !
;! "
var 

repository 
=  
new! $#
ForumCategoryRepository% <
(< =
s= >
)> ?
;? @
} 
) 
; 
} 	
} 
} ›
zC:\Users\Turcu Nicusor\Desktop\Work\Anul 3\DotNet\KunFooD\SourceCode\KunFooD\IntegrationTests\ForumThreadRepositoryTest.cs
	namespace		 	
IntegrationTests		
 
{

 
[ 
	TestClass 
] 
public 

class %
ForumThreadRepositoryTest *
:+ ,
BaseIntegrationTest- @
{ 
[ 	

TestMethod	 
] 
public 
void 
TestGetByCategoryId '
(' (
)( )
{ 	
RunOnDatabase 
( 
async 
s  !
=>" $
{ 
DestroyDatabase 
(  
)  !
;! "
var 

repository 
=  
new! $!
ForumThreadRepository% :
(: ;
s; <
)< =
;= >
Guid 
userId 
= 
Guid "
." #
NewGuid# *
(* +
)+ ,
;, -
Guid 

categoryId 
=  !
Guid" &
.& '
NewGuid' .
(. /
)/ 0
;0 1
await 

repository  
.  !
Add! $
($ %
Thread% +
.+ ,
Create, 2
(2 3
$str3 9
,9 :
$str; F
,F G
userIdH N
,N O

categoryIdP Z
)Z [
)[ \
;\ ]
IEnumerable 
< 
Thread "
>" #
th$ &
=' (
await) .

repository/ 9
.9 :
GetByCategoryId: I
(I J

categoryIdJ T
)T U
;U V
Assert 
. 
AreEqual 
(  
userId  &
,& '
th( *
.* +
First+ 0
(0 1
)1 2
.2 3
UserId3 9
)9 :
;: ;
} 
) 
; 
}   	
}!! 
}"" £3
uC:\Users\Turcu Nicusor\Desktop\Work\Anul 3\DotNet\KunFooD\SourceCode\KunFooD\IntegrationTests\FridgeRepositoryTest.cs
	namespace 	
IntegrationTests
 
{ 
[ 
	TestClass 
] 
public 

class  
FridgeRepositoryTest %
:& '
BaseIntegrationTest( ;
{		 
[

 	

TestMethod

	 
]

 
public 
void >
2Given_Repository_When_Delete_Then_ShouldBe_Correct F
(F G
)G H
{ 	
RunOnDatabase 
( 
async 
s  !
=>" $
{ 
DestroyDatabase 
(  
)  !
;! "
var 

repository 
=  
new! $
FridgeRepository% 5
(5 6
s6 7
)7 8
;8 9
var 
pairItem 
= 
GetPairItems +
(+ ,
), -
.- .
First. 3
(3 4
)4 5
;5 6
await 

repository  
.  !
Add! $
($ %
pairItem% -
)- .
;. /
var 
	pairAdded 
= 

repository  *
.* +
Get+ .
(. /
pairItem/ 7
.7 8
IngredientId8 D
,D E
pairItemF N
.N O
	RecipieIdO X
)X Y
.Y Z
ResultZ `
;` a
await 

repository  
.  !
Delete! '
(' (
	pairAdded( 1
.1 2
IngredientId2 >
,> ?
	pairAdded@ I
.I J
	RecipieIdJ S
)S T
;T U
var 
data 
= 

repository %
.% &
GetAll& ,
(, -
)- .
;. /
Assert 
. 
AreEqual 
(  
$num  !
,! "
data# '
.' (
Result( .
.. /
ToList/ 5
(5 6
)6 7
.7 8
Count8 =
)= >
;> ?
} 
) 
; 
} 	
[ 	

TestMethod	 
] 
public 
void @
4Given_Repository_When_Get_By_Recipe_ShouldBe_Correct H
(H I
)I J
{   	
RunOnDatabase!! 
(!! 
async!! 
s!!  !
=>!!" $
{"" 
DestroyDatabase## 
(##  
)##  !
;##! "
var%% 
fridgeRepos%% 
=%%  !
new%%" %
FridgeRepository%%& 6
(%%6 7
s%%7 8
)%%8 9
;%%9 :
var&& 
categoryRepo&&  
=&&! "
new&&# &)
IngredientsCategoryRepository&&' D
(&&D E
s&&E F
)&&F G
;&&G H
var'' 
ingredientRepo'' "
=''# $
new''% (!
IngredientsRepository'') >
(''> ?
s''? @
,''@ A
categoryRepo''B N
,''N O
fridgeRepos''P [
)''[ \
;''\ ]
var(( 

recipeRepo(( 
=((  
new((! $
RecipesRepository((% 6
(((6 7
s((7 8
,((8 9
fridgeRepos((: E
,((E F
ingredientRepo((G U
)((U V
;((V W
Populate++ 
(++ 
s++ 
)++ 
;++ 
var,, 
data,, 
=,, 
await,,  
fridgeRepos,,! ,
.,,, -
GetByRecipe,,- 8
(,,8 9

recipeRepo,,9 C
.,,C D
	GetByName,,D M
(,,M N
$str,,N R
,,,R S

recipeRepo,,T ^
.,,^ _
GetAll,,_ e
(,,e f
),,f g
),,g h
.,,h i
Result,,i o
.,,o p
First,,p u
(,,u v
),,v w
.,,w x
Id,,x z
),,z {
;,,{ |
Assert// 
.// 
AreEqual// 
(//  
$num//  !
,//! "
data//# '
.//' (
ToList//( .
(//. /
)/// 0
.//0 1
Count//1 6
)//6 7
;//7 8
}00 
)00 
;00 
}11 	
[22 	

TestMethod22	 
]22 
public33 
void33 D
8Given_Repository_When_Get_By_Ingredient_ShouldBe_Correct33 L
(33L M
)33M N
{44 	
RunOnDatabase55 
(55 
async55 
s55  !
=>55" $
{66 
DestroyDatabase77 
(77  
)77  !
;77! "
var99 
fridgeRepos99 
=99  !
new99" %
FridgeRepository99& 6
(996 7
s997 8
)998 9
;999 :
var:: 
categoryRepo::  
=::! "
new::# &)
IngredientsCategoryRepository::' D
(::D E
s::E F
)::F G
;::G H
var;; 
ingredientRepo;; "
=;;# $
new;;% (!
IngredientsRepository;;) >
(;;> ?
s;;? @
,;;@ A
categoryRepo;;B N
,;;N O
fridgeRepos;;P [
);;[ \
;;;\ ]
var<< 

recipeRepo<< 
=<<  
new<<! $
RecipesRepository<<% 6
(<<6 7
s<<7 8
,<<8 9
fridgeRepos<<: E
,<<E F
ingredientRepo<<G U
)<<U V
;<<V W
Populate?? 
(?? 
s?? 
)?? 
;?? 
var@@ 
data@@ 
=@@ 
await@@  
fridgeRepos@@! ,
.@@, -
GetByIngredient@@- <
(@@< =
ingredientRepo@@= K
.@@K L
	GetByName@@L U
(@@U V
$str@@V Z
)@@Z [
.@@[ \
Result@@\ b
.@@b c
First@@c h
(@@h i
)@@i j
.@@j k
Id@@k m
)@@m n
;@@n o
AssertCC 
.CC 
AreEqualCC 
(CC  
$numCC  !
,CC! "
dataCC# '
.CC' (
ToListCC( .
(CC. /
)CC/ 0
.CC0 1
CountCC1 6
)CC6 7
;CC7 8
}DD 
)DD 
;DD 
}EE 	
}FF 
}GG Ö.
ÇC:\Users\Turcu Nicusor\Desktop\Work\Anul 3\DotNet\KunFooD\SourceCode\KunFooD\IntegrationTests\IngredientsCategoryRepositoryTest.cs
	namespace		 	
IntegrationTests		
 
{

 
[ 
	TestClass 
] 
public 

class -
!IngredientsCategoryRepositoryTest 2
:3 4
BaseIntegrationTest5 H
{ 
[ 	

TestMethod	 
] 
public 
void -
!Default_Ingredients_Category_Test 5
(5 6
)6 7
{ 	
RunOnDatabase 
( 
s 
=> 
{ 
DestroyDatabase 
(  
)  !
;! "
var 

repository 
=  
new! $)
IngredientsCategoryRepository% B
(B C
sC D
)D E
;E F
Assert 
. 
IsTrue 
( 
true "
)" #
;# $
} 
) 
; 
} 	
[ 	

TestMethod	 
] 
public 
void 0
$Add_IngredientCategory_Shoul_Work_Ok 8
(8 9
)9 :
{ 	
RunOnDatabase   
(   
async   
s    !
=>  " $
{!! 
DestroyDatabase"" 
(""  
)""  !
;""! "
var$$ 
categoryRepo$$  
=$$! "
new$$# &)
IngredientsCategoryRepository$$' D
($$D E
s$$E F
)$$F G
;$$G H
IEnumerable%% 
<%% 
IngredientCategory%% .
>%%. /

categories%%0 :
=%%; < 
GetDefaultCategories%%= Q
(%%Q R
)%%R S
;%%S T
foreach(( 
((( 
var(( 
ingredientCategory(( /
in((0 2

categories((3 =
)((= >
{)) 
await** 
categoryRepo** &
.**& '
Add**' *
(*** +
ingredientCategory**+ =
)**= >
;**> ?
}++ 
var.. 
cat.. 
=.. 
categoryRepo.. &
...& '
GetAll..' -
(..- .
)... /
;../ 0
Assert// 
.// 
AreEqual// 
(//  

categories//  *
.//* +
Count//+ 0
(//0 1
)//1 2
,//2 3
cat//4 7
.//7 8
Result//8 >
.//> ?
ToList//? E
(//E F
)//F G
.//G H
Count//H M
)//M N
;//N O
}00 
)00 
;00 
}11 	
[22 	

TestMethod22	 
]22 
public33 
void33  
Exist_Should_Work_Ok33 (
(33( )
)33) *
{44 	
RunOnDatabase55 
(55 
async55 
s55  !
=>55" $
{66 
DestroyDatabase77 
(77  
)77  !
;77! "
var99 
categoryRepo99  
=99! "
new99# &)
IngredientsCategoryRepository99' D
(99D E
s99E F
)99F G
;99G H
IEnumerable:: 
<:: 
IngredientCategory:: .
>::. /

categories::0 :
=::; < 
GetDefaultCategories::= Q
(::Q R
)::R S
;::S T
foreach== 
(== 
var== 
ingredientCategory== /
in==0 2

categories==3 =
)=== >
{>> 
await?? 
categoryRepo?? &
.??& '
Add??' *
(??* +
ingredientCategory??+ =
)??= >
;??> ?
}@@ 
BooleanCC 
existsCC 
=CC  
categoryRepoCC! -
.CC- .
ExistsCC. 4
(CC4 5
$strCC5 H
)CCH I
.CCI J
ResultCCJ P
;CCP Q
AssertDD 
.DD 
AreEqualDD 
(DD  
trueDD  $
,DD$ %
existsDD& ,
)DD, -
;DD- .
}EE 
)EE 
;EE 
}FF 	
[GG 	

TestMethodGG	 
]GG 
publicHH 
voidHH $
GetByName_Should_Work_OkHH ,
(HH, -
)HH- .
{II 	
RunOnDatabaseJJ 
(JJ 
asyncJJ 
sJJ  !
=>JJ" $
{KK 
DestroyDatabaseLL 
(LL  
)LL  !
;LL! "
varNN 
categoryRepoNN  
=NN! "
newNN# &)
IngredientsCategoryRepositoryNN' D
(NND E
sNNE F
)NNF G
;NNG H
IEnumerableOO 
<OO 
IngredientCategoryOO .
>OO. /

categoriesOO0 :
=OO; < 
GetDefaultCategoriesOO= Q
(OOQ R
)OOR S
;OOS T
foreachRR 
(RR 
varRR 
ingredientCategoryRR /
inRR0 2

categoriesRR3 =
)RR= >
{SS 
awaitTT 
categoryRepoTT &
.TT& '
AddTT' *
(TT* +
ingredientCategoryTT+ =
)TT= >
;TT> ?
}UU 
IngredientCategoryXX "
icXX# %
=XX& '
categoryRepoXX( 4
.XX4 5
	GetByNameXX5 >
(XX> ?
$strXX? O
)XXO P
.XXP Q
ResultXXQ W
;XXW X
AssertYY 
.YY 
AreEqualYY 
(YY  
icYY  "
.YY" #
IdYY# %
,YY% &

categoriesYY' 1
.YY1 2
FirstYY2 7
(YY7 8
)YY8 9
.YY9 :
IdYY: <
)YY< =
;YY= >
}ZZ 
)ZZ 
;ZZ 
}[[ 	
}\\ 
}]] Æ_
zC:\Users\Turcu Nicusor\Desktop\Work\Anul 3\DotNet\KunFooD\SourceCode\KunFooD\IntegrationTests\IngredientsRepositoryTest.cs
	namespace 	
IntegrationTests
 
{		 
[

 
	TestClass

 
]

 
public 

class %
IngredientsRepositoryTest *
:+ ,
BaseIntegrationTest- @
{ 
[ 	

TestMethod	 
] 
public 
void $
Default_Ingredients_Test ,
(, -
)- .
{ 	
RunOnDatabase 
( 
s 
=> 
{ 
DestroyDatabase 
(  
)  !
;! "
var 

fridgeRepo 
=  
new! $
FridgeRepository% 5
(5 6
s6 7
)7 8
;8 9
var 
ingredCatRepo !
=" #
new$ ')
IngredientsCategoryRepository( E
(E F
sF G
)G H
;H I
var 

repository 
=  
new! $!
IngredientsRepository% :
(: ;
s; <
,< =
ingredCatRepo> K
,K L

fridgeRepoM W
)W X
;X Y
Assert 
. 
IsTrue 
( 
true "
)" #
;# $
} 
) 
; 
} 	
[ 	

TestMethod	 
] 
public 
void !
Exists_Should_Work_Ok )
() *
)* +
{   	
RunOnDatabase!! 
(!! 
async!! 
s!!  !
=>!!" $
{"" 
DestroyDatabase## 
(##  
)##  !
;##! "
var%% 

fridgeRepo%% 
=%%  
new%%! $
FridgeRepository%%% 5
(%%5 6
s%%6 7
)%%7 8
;%%8 9
var&& 
ingredCatRepo&& !
=&&" #
new&&$ ')
IngredientsCategoryRepository&&( E
(&&E F
s&&F G
)&&G H
;&&H I
var'' 

ingredRepo'' 
=''  
new''! $!
IngredientsRepository''% :
('': ;
s''; <
,''< =
ingredCatRepo''> K
,''K L

fridgeRepo''M W
)''W X
;''X Y
IEnumerable(( 
<(( 
IngredientCategory(( .
>((. /

categories((0 :
=((; < 
GetDefaultCategories((= Q
(((Q R
)((R S
;((S T
foreach** 
(** 
var** 
ingredientCategory** /
in**0 2

categories**3 =
)**= >
{++ 
await,, 
ingredCatRepo,, '
.,,' (
Add,,( +
(,,+ ,
ingredientCategory,,, >
),,> ?
;,,? @
}-- 
await.. 

ingredRepo..  
...  !
Add..! $
(..$ %

Ingredient..% /
.../ 0
Create..0 6
(..6 7
ingredCatRepo..7 D
...D E
GetAll..E K
(..K L
)..L M
...M N
Result..N T
...T U
First..U Z
(..Z [
)..[ \
...\ ]
Id..] _
,.._ `
$str..a h
,..h i
$str..j q
,..q r
$num..s v
)..v w
)..w x
;..x y
Boolean11 
bool111 
=11 

ingredRepo11  *
.11* +
Exists11+ 1
(111 2
$str112 9
)119 :
.11: ;
Result11; A
;11A B
Boolean22 
bool222 
=22 

ingredRepo22  *
.22* +
Exists22+ 1
(221 2
$str222 9
,229 :
$str22; B
)22B C
.22C D
Result22D J
;22J K
Boolean33 
bool333 
=33 

ingredRepo33  *
.33* +
Exists33+ 1
(331 2
$str332 9
,339 :
$str33; B
)33B C
.33C D
Result33D J
;33J K
Assert44 
.44 
IsTrue44 
(44 
bool144 #
&&44$ &
bool244' ,
&&44- /
!440 1
bool3441 6
)446 7
;447 8
}55 
)55 
;55 
}66 	
[88 	

TestMethod88	 
]88 
public99 
void99 *
AddIngredientCustom_ShouldWork99 2
(992 3
)993 4
{:: 	
RunOnDatabase;; 
(;; 
async;; 
s;;  !
=>;;" $
{<< 
DestroyDatabase== 
(==  
)==  !
;==! "
var?? 

fridgeRepo?? 
=??  
new??! $
FridgeRepository??% 5
(??5 6
s??6 7
)??7 8
;??8 9
var@@ 
ingredCatRepo@@ !
=@@" #
new@@$ ')
IngredientsCategoryRepository@@( E
(@@E F
s@@F G
)@@G H
;@@H I
varAA 

ingredRepoAA 
=AA  
newAA! $!
IngredientsRepositoryAA% :
(AA: ;
sAA; <
,AA< =
ingredCatRepoAA> K
,AAK L

fridgeRepoAAM W
)AAW X
;AAX Y
varBB 

recipeRepoBB 
=BB  
newBB! $
RecipesRepositoryBB% 6
(BB6 7
sBB7 8
,BB8 9

fridgeRepoBB: D
,BBD E

ingredRepoBBF P
)BBP Q
;BBQ R
IEnumerableCC 
<CC 
IngredientCategoryCC .
>CC. /

categoriesCC0 :
=CC; < 
GetDefaultCategoriesCC= Q
(CCQ R
)CCR S
;CCS T
PopulateEE 
(EE 
sEE 
)EE 
;EE 
intFF 
countFF 
=FF 

ingredRepoFF &
.FF& '
GetAllFF' -
(FF- .
)FF. /
.FF/ 0
ResultFF0 6
.FF6 7
CountFF7 <
(FF< =
)FF= >
;FF> ?
awaitGG 

ingredRepoGG  
.GG  !
AddIngredientCustomGG! 4
(GG4 5

recipeRepoGG5 ?
.GG? @
GetAllGG@ F
(GGF G
)GGG H
.GGH I
ResultGGI O
.GGO P
FirstGGP U
(GGU V
)GGV W
.GGW X
IdGGX Z
,GGZ [
$strGG\ _
,GG_ `
$strGGa e
,GGe f
$strGGg l
,GGl m
$numGGn o
,GGo p
$numGGq r
,GGr s
$numGGt u
)GGu v
;GGv w
awaitHH 

ingredRepoHH  
.HH  !
AddIngredientCustomHH! 4
(HH4 5

recipeRepoHH5 ?
.HH? @
GetAllHH@ F
(HHF G
)HHG H
.HHH I
ResultHHI O
.HHO P
FirstHHP U
(HHU V
)HHV W
.HHW X
IdHHX Z
,HHZ [
$strHH\ l
,HHl m
$strHHn r
,HHr s
$strHHt y
,HHy z
$numHH{ |
,HH| }
$numHH~ 
,	HH Ä
$num
HHÅ Ç
)
HHÇ É
;
HHÉ Ñ
awaitJJ 

ingredRepoJJ  
.JJ  !
AddIngredientCustomJJ! 4
(JJ4 5

recipeRepoJJ5 ?
.JJ? @
GetAllJJ@ F
(JJF G
)JJG H
.JJH I
ResultJJI O
.JJO P
FirstJJP U
(JJU V
)JJV W
.JJW X
IdJJX Z
,JJZ [
$strJJ\ k
,JJk l
$strJJm q
,JJq r
$strJJs x
,JJx y
$numJJz {
,JJ{ |
$numJJ} ~
,JJ~ 
$num
JJÄ Å
)
JJÅ Ç
;
JJÇ É
AssertLL 
.LL 
AreEqualLL 
(LL  
countLL  %
+LL& '
$numLL' (
,LL( )

ingredRepoLL* 4
.LL4 5
GetAllLL5 ;
(LL; <
)LL< =
.LL= >
ResultLL> D
.LLD E
CountLLE J
(LLJ K
)LLK L
)LLL M
;LLM N
}MM 
)MM 
;MM 
}NN 	
[OO 	

TestMethodOO	 
]OO 
publicPP 
voidPP *
GetSpecificCategory_ShouldWorkPP 2
(PP2 3
)PP3 4
{QQ 	
RunOnDatabaseRR 
(RR 
asyncRR 
sRR  !
=>RR" $
{SS 
DestroyDatabaseTT 
(TT  
)TT  !
;TT! "
varVV 

fridgeRepoVV 
=VV  
newVV! $
FridgeRepositoryVV% 5
(VV5 6
sVV6 7
)VV7 8
;VV8 9
varWW 
ingredCatRepoWW !
=WW" #
newWW$ ')
IngredientsCategoryRepositoryWW( E
(WWE F
sWWF G
)WWG H
;WWH I
varXX 

ingredRepoXX 
=XX  
newXX! $!
IngredientsRepositoryXX% :
(XX: ;
sXX; <
,XX< =
ingredCatRepoXX> K
,XXK L

fridgeRepoXXM W
)XXW X
;XXX Y
varYY 

recipeRepoYY 
=YY  
newYY! $
RecipesRepositoryYY% 6
(YY6 7
sYY7 8
,YY8 9

fridgeRepoYY: D
,YYD E

ingredRepoYYF P
)YYP Q
;YYQ R
IEnumerableZZ 
<ZZ 
IngredientCategoryZZ .
>ZZ. /

categoriesZZ0 :
=ZZ; < 
GetDefaultCategoriesZZ= Q
(ZZQ R
)ZZR S
;ZZS T
Populate\\ 
(\\ 
s\\ 
)\\ 
;\\ 
await]] 

ingredRepo]]  
.]]  !
AddIngredientCustom]]! 4
(]]4 5

recipeRepo]]5 ?
.]]? @
GetAll]]@ F
(]]F G
)]]G H
.]]H I
Result]]I O
.]]O P
First]]P U
(]]U V
)]]V W
.]]W X
Id]]X Z
,]]Z [
$str]]\ k
,]]k l
$str]]m r
,]]r s
$str]]t x
,]]x y
$num]]z {
,]]{ |
$num]]} ~
,]]~ 
$num
]]Ä Å
)
]]Å Ç
;
]]Ç É
await^^ 

ingredRepo^^  
.^^  !
AddIngredientCustom^^! 4
(^^4 5

recipeRepo^^5 ?
.^^? @
GetAll^^@ F
(^^F G
)^^G H
.^^H I
Result^^I O
.^^O P
First^^P U
(^^U V
)^^V W
.^^W X
Id^^X Z
,^^Z [
$str^^\ o
,^^o p
$str^^q v
,^^v w
$str^^x |
,^^| }
$num^^~ 
,	^^ Ä
$num
^^Å Ç
,
^^Ç É
$num
^^Ñ Ö
)
^^Ö Ü
;
^^Ü á
var__ 
res__ 
=__ 
await__ 

ingredRepo__  *
.__* +
GetSpecificCategory__+ >
(__> ?
$str__? C
)__C D
;__D E
var`` 
res2`` 
=`` 
await``  

ingredRepo``! +
.``+ ,
GetSpecificCategory``, ?
(``? @
$str``@ D
)``D E
;``E F
varaa 
res1aa 
=aa 
awaitaa  

ingredRepoaa! +
.aa+ ,
GetSpecificCategoryaa, ?
(aa? @
$straa@ F
)aaF G
;aaG H
Assertcc 
.cc 
AreEqualcc 
(cc  
rescc  #
,cc# $
ingredCatRepocc% 2
.cc2 3
	GetByNamecc3 <
(cc< =
$strcc= L
)ccL M
.ccM N
ResultccN T
.ccT U
IdccU W
)ccW X
;ccX Y
Assertdd 
.dd 
AreEqualdd 
(dd  
res2dd  $
,dd$ %
nulldd& *
)dd* +
;dd+ ,
Assertee 
.ee 
AreEqualee 
(ee  
nullee  $
,ee$ %
res1ee& *
)ee* +
;ee+ ,
}ff 
)ff 
;ff 
}gg 	
}hh 
}ii ÿÌ
vC:\Users\Turcu Nicusor\Desktop\Work\Anul 3\DotNet\KunFooD\SourceCode\KunFooD\IntegrationTests\RecipesRepositoryTest.cs
	namespace		 	
IntegrationTests		
 
{

 
[ 
	TestClass 
] 
public 

class !
RecipesRepositoryTest &
:' (
BaseIntegrationTest) <
{ 
[ 	

TestMethod	 
] 
public 
void  
Default_Recipes_Test (
(( )
)) *
{ 	
RunOnDatabase 
( 
s 
=> 
{ 
DestroyDatabase 
(  
)  !
;! "
var 

fridgeRepo 
=  
new! $
FridgeRepository% 5
(5 6
s6 7
)7 8
;8 9
var 
ingredCatRepo !
=" #
new$ ')
IngredientsCategoryRepository( E
(E F
sF G
)G H
;H I
var 
ingredientRepo "
=# $
new% (!
IngredientsRepository) >
(> ?
s? @
,@ A
ingredCatRepoB O
,O P

fridgeRepoQ [
)[ \
;\ ]
var 

repository 
=  
new! $
RecipesRepository% 6
(6 7
s7 8
,8 9

fridgeRepo: D
,D E
ingredientRepoF T
)T U
;U V
Assert 
. 
IsTrue 
( 
true "
)" #
;# $
} 
) 
; 
} 	
[   	

TestMethod  	 
]   
public!! 
void!! &
GetByKithen_Should_Work_Ok!! .
(!!. /
)!!/ 0
{"" 	
RunOnDatabase## 
(## 
async## 
s##  !
=>##" $
{$$ 
DestroyDatabase%% 
(%%  
)%%  !
;%%! "
var'' 

fridgeRepo'' 
=''  
new''! $
FridgeRepository''% 5
(''5 6
s''6 7
)''7 8
;''8 9
var(( 
ingredCatRepo(( !
=((" #
new(($ ')
IngredientsCategoryRepository((( E
(((E F
s((F G
)((G H
;((H I
var)) 

ingredRepo)) 
=))  
new))! $!
IngredientsRepository))% :
()): ;
s)); <
,))< =
ingredCatRepo))> K
,))K L

fridgeRepo))M W
)))W X
;))X Y
var** 

recipeRepo** 
=**  
new**! $
RecipesRepository**% 6
(**6 7
s**7 8
,**8 9

fridgeRepo**: D
,**D E

ingredRepo**F P
)**P Q
;**Q R
Populate,, 
(,, 
s,, 
),, 
;,, 
var-- 
res-- 
=-- 
await-- 

recipeRepo--  *
.--* +
GetByKitchenType--+ ;
(--; <
KitchenType--< G
.--G H
Asian--H M
,--M N

recipeRepo--O Y
.--Y Z
GetAll--Z `
(--` a
)--a b
)--b c
;--c d
Assert// 
.// 
IsTrue// 
(// 
$num// 
==//  "
res//# &
.//& '
ToList//' -
(//- .
)//. /
./// 0
Count//0 5
)//5 6
;//6 7
}00 
)00 
;00 
}11 	
[22 	

TestMethod22	 
]22 
public33 
void33 $
GetByCost_Should_Work_Ok33 ,
(33, -
)33- .
{44 	
RunOnDatabase55 
(55 
async55 
s55  !
=>55" $
{66 
DestroyDatabase77 
(77  
)77  !
;77! "
var99 

fridgeRepo99 
=99  
new99! $
FridgeRepository99% 5
(995 6
s996 7
)997 8
;998 9
var:: 
ingredCatRepo:: !
=::" #
new::$ ')
IngredientsCategoryRepository::( E
(::E F
s::F G
)::G H
;::H I
var;; 

ingredRepo;; 
=;;  
new;;! $!
IngredientsRepository;;% :
(;;: ;
s;;; <
,;;< =
ingredCatRepo;;> K
,;;K L

fridgeRepo;;M W
);;W X
;;;X Y
var<< 

recipeRepo<< 
=<<  
new<<! $
RecipesRepository<<% 6
(<<6 7
s<<7 8
,<<8 9

fridgeRepo<<: D
,<<D E

ingredRepo<<F P
)<<P Q
;<<Q R
Populate>> 
(>> 
s>> 
)>> 
;>> 
var?? 
res?? 
=?? 
await?? 

recipeRepo??  *
.??* +
	GetByCost??+ 4
(??4 5
$num??5 8
,??8 9

recipeRepo??: D
.??D E
GetAll??E K
(??K L
)??L M
)??M N
;??N O
AssertAA 
.AA 
AreEqualAA 
(AA  
$numAA  !
,AA! "
resAA# &
.AA& '
ToListAA' -
(AA- .
)AA. /
.AA/ 0
CountAA0 5
)AA5 6
;AA6 7
}BB 
)BB 
;BB 
}CC 	
[DD 	

TestMethodDD	 
]DD 
publicEE 
voidEE &
GetByRating_Should_Work_OkEE .
(EE. /
)EE/ 0
{FF 	
RunOnDatabaseGG 
(GG 
asyncGG 
sGG  !
=>GG" $
{HH 
DestroyDatabaseII 
(II  
)II  !
;II! "
varKK 

fridgeRepoKK 
=KK  
newKK! $
FridgeRepositoryKK% 5
(KK5 6
sKK6 7
)KK7 8
;KK8 9
varLL 
ingredCatRepoLL !
=LL" #
newLL$ ')
IngredientsCategoryRepositoryLL( E
(LLE F
sLLF G
)LLG H
;LLH I
varMM 

ingredRepoMM 
=MM  
newMM! $!
IngredientsRepositoryMM% :
(MM: ;
sMM; <
,MM< =
ingredCatRepoMM> K
,MMK L

fridgeRepoMMM W
)MMW X
;MMX Y
varNN 

recipeRepoNN 
=NN  
newNN! $
RecipesRepositoryNN% 6
(NN6 7
sNN7 8
,NN8 9

fridgeRepoNN: D
,NND E

ingredRepoNNF P
)NNP Q
;NNQ R
PopulatePP 
(PP 
sPP 
)PP 
;PP 
varQQ 
resQQ 
=QQ 
awaitQQ 

recipeRepoQQ  *
.QQ* +
GetByRatingQQ+ 6
(QQ6 7
$numQQ7 8
,QQ8 9

recipeRepoQQ: D
.QQD E
GetAllQQE K
(QQK L
)QQL M
)QQM N
;QQN O
AssertSS 
.SS 
IsTrueSS 
(SS 
$numSS 
==SS  "
resSS# &
.SS& '
ToListSS' -
(SS- .
)SS. /
.SS/ 0
CountSS0 5
)SS5 6
;SS6 7
}TT 
)TT 
;TT 
}UU 	
[VV 	

TestMethodVV	 
]VV 
publicWW 
voidWW +
GetByVotesNumber_Should_Work_OkWW 3
(WW3 4
)WW4 5
{XX 	
RunOnDatabaseYY 
(YY 
asyncYY 
sYY  !
=>YY" $
{ZZ 
DestroyDatabase[[ 
([[  
)[[  !
;[[! "
var]] 

fridgeRepo]] 
=]]  
new]]! $
FridgeRepository]]% 5
(]]5 6
s]]6 7
)]]7 8
;]]8 9
var^^ 
ingredCatRepo^^ !
=^^" #
new^^$ ')
IngredientsCategoryRepository^^( E
(^^E F
s^^F G
)^^G H
;^^H I
var__ 

ingredRepo__ 
=__  
new__! $!
IngredientsRepository__% :
(__: ;
s__; <
,__< =
ingredCatRepo__> K
,__K L

fridgeRepo__M W
)__W X
;__X Y
var`` 

recipeRepo`` 
=``  
new``! $
RecipesRepository``% 6
(``6 7
s``7 8
,``8 9

fridgeRepo``: D
,``D E

ingredRepo``F P
)``P Q
;``Q R
Populatebb 
(bb 
sbb 
)bb 
;bb 
varcc 
rescc 
=cc 
awaitcc 

recipeRepocc  *
.cc* +
GetByVotesNumbercc+ ;
(cc; <
$numcc< =
,cc= >

recipeRepocc? I
.ccI J
GetAllccJ P
(ccP Q
)ccQ R
)ccR S
;ccS T
Assertee 
.ee 
IsTrueee 
(ee 
$numee 
==ee  "
resee# &
.ee& '
ToListee' -
(ee- .
)ee. /
.ee/ 0
Countee0 5
)ee5 6
;ee6 7
}ff 
)ff 
;ff 
}gg 	
[hh 	

TestMethodhh	 
]hh 
publicii 
voidii +
GetByIngredients_Should_Work_Okii 3
(ii3 4
)ii4 5
{jj 	
RunOnDatabasekk 
(kk 
asynckk 
skk  !
=>kk" $
{ll 
DestroyDatabasemm 
(mm  
)mm  !
;mm! "
varoo 

fridgeRepooo 
=oo  
newoo! $
FridgeRepositoryoo% 5
(oo5 6
soo6 7
)oo7 8
;oo8 9
varpp 
ingredCatRepopp !
=pp" #
newpp$ ')
IngredientsCategoryRepositorypp( E
(ppE F
sppF G
)ppG H
;ppH I
varqq 

ingredRepoqq 
=qq  
newqq! $!
IngredientsRepositoryqq% :
(qq: ;
sqq; <
,qq< =
ingredCatRepoqq> K
,qqK L

fridgeRepoqqM W
)qqW X
;qqX Y
varrr 

recipeReporr 
=rr  
newrr! $
RecipesRepositoryrr% 6
(rr6 7
srr7 8
,rr8 9

fridgeReporr: D
,rrD E

ingredReporrF P
)rrP Q
;rrQ R
Populatett 
(tt 
stt 
)tt 
;tt 
varuu 
resuu 
=uu 
awaituu 

recipeRepouu  *
.uu* +
IngredientsNumberuu+ <
(uu< =

recipeRepouu= G
.uuG H
	GetByNameuuH Q
(uuQ R
$struuR V
,uuV W

recipeRepouuX b
.uub c
GetAlluuc i
(uui j
)uuj k
)uuk l
.uul m
Resultuum s
.uus t
Firstuut y
(uuy z
)uuz {
.uu{ |
Iduu| ~
)uu~ 
;	uu Ä
Assertww 
.ww 
IsTrueww 
(ww 
$numww 
==ww  "
resww# &
)ww& '
;ww' (
}xx 
)xx 
;xx 
}yy 	
[zz 	

TestMethodzz	 
]zz 
public{{ 
void{{ -
!ContainsIngredient_Should_Work_Ok{{ 5
({{5 6
){{6 7
{|| 	
RunOnDatabase}} 
(}} 
async}} 
s}}  !
=>}}" $
{~~ 
DestroyDatabase 
(  
)  !
;! "
var
ÅÅ 

fridgeRepo
ÅÅ 
=
ÅÅ  
new
ÅÅ! $
FridgeRepository
ÅÅ% 5
(
ÅÅ5 6
s
ÅÅ6 7
)
ÅÅ7 8
;
ÅÅ8 9
var
ÇÇ 
ingredCatRepo
ÇÇ !
=
ÇÇ" #
new
ÇÇ$ '+
IngredientsCategoryRepository
ÇÇ( E
(
ÇÇE F
s
ÇÇF G
)
ÇÇG H
;
ÇÇH I
var
ÉÉ 

ingredRepo
ÉÉ 
=
ÉÉ  
new
ÉÉ! $#
IngredientsRepository
ÉÉ% :
(
ÉÉ: ;
s
ÉÉ; <
,
ÉÉ< =
ingredCatRepo
ÉÉ> K
,
ÉÉK L

fridgeRepo
ÉÉM W
)
ÉÉW X
;
ÉÉX Y
var
ÑÑ 

recipeRepo
ÑÑ 
=
ÑÑ  
new
ÑÑ! $
RecipesRepository
ÑÑ% 6
(
ÑÑ6 7
s
ÑÑ7 8
,
ÑÑ8 9

fridgeRepo
ÑÑ: D
,
ÑÑD E

ingredRepo
ÑÑF P
)
ÑÑP Q
;
ÑÑQ R
Populate
ÜÜ 
(
ÜÜ 
s
ÜÜ 
)
ÜÜ 
;
ÜÜ 
var
áá 
res
áá 
=
áá 
await
áá 

recipeRepo
áá  *
.
áá* + 
ContainsIngredient
áá+ =
(
áá= >

recipeRepo
áá> H
.
ááH I
	GetByName
ááI R
(
ááR S
$str
ááS W
,
ááW X

recipeRepo
ááY c
.
áác d
GetAll
áád j
(
ááj k
)
áák l
)
áál m
.
áám n
Result
áán t
.
áát u
First
ááu z
(
ááz {
)
áá{ |
.
áá| }
Id
áá} 
,áá Ä

ingredRepoááÅ ã
.ááã å
	GetByNameááå ï
(ááï ñ
$strááñ ö
)ááö õ
.ááõ ú
Resultááú ¢
.áá¢ £
Firstáá£ ®
(áá® ©
)áá© ™
.áá™ ´
Idáá´ ≠
)áá≠ Æ
;ááÆ Ø
Assert
ââ 
.
ââ 
IsTrue
ââ 
(
ââ 
res
ââ !
)
ââ! "
;
ââ" #
}
ää 
)
ää 
;
ää 
}
ãã 	
[
åå 	

TestMethod
åå	 
]
åå 
public
çç 
void
çç 0
"IncludesIngredients_Should_Work_Ok
çç 6
(
çç6 7
)
çç7 8
{
éé 	
RunOnDatabase
èè 
(
èè 
async
èè 
s
èè  !
=>
èè" $
{
êê 
DestroyDatabase
ëë 
(
ëë  
)
ëë  !
;
ëë! "
var
ìì 

fridgeRepo
ìì 
=
ìì  
new
ìì! $
FridgeRepository
ìì% 5
(
ìì5 6
s
ìì6 7
)
ìì7 8
;
ìì8 9
var
îî 
ingredCatRepo
îî !
=
îî" #
new
îî$ '+
IngredientsCategoryRepository
îî( E
(
îîE F
s
îîF G
)
îîG H
;
îîH I
var
ïï 

ingredRepo
ïï 
=
ïï  
new
ïï! $#
IngredientsRepository
ïï% :
(
ïï: ;
s
ïï; <
,
ïï< =
ingredCatRepo
ïï> K
,
ïïK L

fridgeRepo
ïïM W
)
ïïW X
;
ïïX Y
var
ññ 

recipeRepo
ññ 
=
ññ  
new
ññ! $
RecipesRepository
ññ% 6
(
ññ6 7
s
ññ7 8
,
ññ8 9

fridgeRepo
ññ: D
,
ññD E

ingredRepo
ññF P
)
ññP Q
;
ññQ R
Populate
òò 
(
òò 
s
òò 
)
òò 
;
òò 
List
ôô 
<
ôô 

Ingredient
ôô 
>
ôô  
igToAdd
ôô! (
=
ôô) *
new
ôô+ .
List
ôô/ 3
<
ôô3 4

Ingredient
ôô4 >
>
ôô> ?
(
ôô? @
)
ôô@ A
;
ôôA B
igToAdd
öö 
.
öö 
Add
öö 
(
öö 

ingredRepo
öö &
.
öö& '
	GetByName
öö' 0
(
öö0 1
$str
öö1 5
)
öö5 6
.
öö6 7
Result
öö7 =
.
öö= >
First
öö> C
(
ööC D
)
ööD E
)
ööE F
;
ööF G
var
õõ 
res
õõ 
=
õõ 
await
õõ 

recipeRepo
õõ  *
.
õõ* +&
IncludesTheseIngredients
õõ+ C
(
õõC D

recipeRepo
õõD N
.
õõN O
	GetByName
õõO X
(
õõX Y
$str
õõY ]
,
õõ] ^

recipeRepo
õõ_ i
.
õõi j
GetAll
õõj p
(
õõp q
)
õõq r
)
õõr s
.
õõs t
Result
õõt z
.
õõz {
Firstõõ{ Ä
(õõÄ Å
)õõÅ Ç
.õõÇ É
IdõõÉ Ö
,õõÖ Ü
igToAddõõá é
)õõé è
;õõè ê
Assert
ûû 
.
ûû 
AreEqual
ûû 
(
ûû  
true
ûû  $
,
ûû$ %
res
ûû& )
)
ûû) *
;
ûû* +
}
üü 
)
üü 
;
üü 
}
†† 	
[
¢¢ 	

TestMethod
¢¢	 
]
¢¢ 
public
££ 
void
££ 0
"ExcludesIngredients_Should_Work_Ok
££ 6
(
££6 7
)
££7 8
{
§§ 	
RunOnDatabase
•• 
(
•• 
async
•• 
s
••  !
=>
••" $
{
¶¶ 
DestroyDatabase
ßß 
(
ßß  
)
ßß  !
;
ßß! "
var
©© 

fridgeRepo
©© 
=
©©  
new
©©! $
FridgeRepository
©©% 5
(
©©5 6
s
©©6 7
)
©©7 8
;
©©8 9
var
™™ 
ingredCatRepo
™™ !
=
™™" #
new
™™$ '+
IngredientsCategoryRepository
™™( E
(
™™E F
s
™™F G
)
™™G H
;
™™H I
var
´´ 

ingredRepo
´´ 
=
´´  
new
´´! $#
IngredientsRepository
´´% :
(
´´: ;
s
´´; <
,
´´< =
ingredCatRepo
´´> K
,
´´K L

fridgeRepo
´´M W
)
´´W X
;
´´X Y
var
¨¨ 

recipeRepo
¨¨ 
=
¨¨  
new
¨¨! $
RecipesRepository
¨¨% 6
(
¨¨6 7
s
¨¨7 8
,
¨¨8 9

fridgeRepo
¨¨: D
,
¨¨D E

ingredRepo
¨¨F P
)
¨¨P Q
;
¨¨Q R
Populate
ÆÆ 
(
ÆÆ 
s
ÆÆ 
)
ÆÆ 
;
ÆÆ 
List
ØØ 
<
ØØ 

Ingredient
ØØ 
>
ØØ  
igToAdd
ØØ! (
=
ØØ) *
new
ØØ+ .
List
ØØ/ 3
<
ØØ3 4

Ingredient
ØØ4 >
>
ØØ> ?
(
ØØ? @
)
ØØ@ A
;
ØØA B
igToAdd
∞∞ 
.
∞∞ 
Add
∞∞ 
(
∞∞ 

ingredRepo
∞∞ &
.
∞∞& '
	GetByName
∞∞' 0
(
∞∞0 1
$str
∞∞1 5
)
∞∞5 6
.
∞∞6 7
Result
∞∞7 =
.
∞∞= >
First
∞∞> C
(
∞∞C D
)
∞∞D E
)
∞∞E F
;
∞∞F G
var
±± 
res
±± 
=
±± 
await
±± 

recipeRepo
±±  *
.
±±* +&
ExcludesTheseIngredients
±±+ C
(
±±C D

recipeRepo
±±D N
.
±±N O
	GetByName
±±O X
(
±±X Y
$str
±±Y ]
,
±±] ^

recipeRepo
±±_ i
.
±±i j
GetAll
±±j p
(
±±p q
)
±±q r
)
±±r s
.
±±s t
Result
±±t z
.
±±z {
First±±{ Ä
(±±Ä Å
)±±Å Ç
.±±Ç É
Id±±É Ö
,±±Ö Ü
igToAdd±±á é
)±±é è
;±±è ê
Assert
¥¥ 
.
¥¥ 
AreEqual
¥¥ 
(
¥¥  
false
¥¥  %
,
¥¥% &
res
¥¥' *
)
¥¥* +
;
¥¥+ ,
}
µµ 
)
µµ 
;
µµ 
}
∂∂ 	
[
∏∏ 	

TestMethod
∏∏	 
]
∏∏ 
public
ππ 
void
ππ 1
#GetByOnlyIngredients_Should_Work_Ok
ππ 7
(
ππ7 8
)
ππ8 9
{
∫∫ 	
RunOnDatabase
ªª 
(
ªª 
async
ªª 
s
ªª  !
=>
ªª" $
{
ºº 
DestroyDatabase
ΩΩ 
(
ΩΩ  
)
ΩΩ  !
;
ΩΩ! "
var
øø 

fridgeRepo
øø 
=
øø  
new
øø! $
FridgeRepository
øø% 5
(
øø5 6
s
øø6 7
)
øø7 8
;
øø8 9
var
¿¿ 
ingredCatRepo
¿¿ !
=
¿¿" #
new
¿¿$ '+
IngredientsCategoryRepository
¿¿( E
(
¿¿E F
s
¿¿F G
)
¿¿G H
;
¿¿H I
var
¡¡ 

ingredRepo
¡¡ 
=
¡¡  
new
¡¡! $#
IngredientsRepository
¡¡% :
(
¡¡: ;
s
¡¡; <
,
¡¡< =
ingredCatRepo
¡¡> K
,
¡¡K L

fridgeRepo
¡¡M W
)
¡¡W X
;
¡¡X Y
var
¬¬ 

recipeRepo
¬¬ 
=
¬¬  
new
¬¬! $
RecipesRepository
¬¬% 6
(
¬¬6 7
s
¬¬7 8
,
¬¬8 9

fridgeRepo
¬¬: D
,
¬¬D E

ingredRepo
¬¬F P
)
¬¬P Q
;
¬¬Q R
Populate
ƒƒ 
(
ƒƒ 
s
ƒƒ 
)
ƒƒ 
;
ƒƒ 
List
≈≈ 
<
≈≈ 

Ingredient
≈≈ 
>
≈≈  
igToAdd
≈≈! (
=
≈≈) *
new
≈≈+ .
List
≈≈/ 3
<
≈≈3 4

Ingredient
≈≈4 >
>
≈≈> ?
(
≈≈? @
)
≈≈@ A
;
≈≈A B
igToAdd
∆∆ 
.
∆∆ 
Add
∆∆ 
(
∆∆ 

ingredRepo
∆∆ &
.
∆∆& '
	GetByName
∆∆' 0
(
∆∆0 1
$str
∆∆1 5
)
∆∆5 6
.
∆∆6 7
Result
∆∆7 =
.
∆∆= >
First
∆∆> C
(
∆∆C D
)
∆∆D E
)
∆∆E F
;
∆∆F G
var
«« 
res
«« 
=
«« 
await
«« 

recipeRepo
««  *
.
««* +"
GetByOnlyIngredients
««+ ?
(
««? @
igToAdd
««@ G
,
««G H

recipeRepo
««I S
.
««S T
GetAll
««T Z
(
««Z [
)
««[ \
)
««\ ]
;
««] ^
Assert
   
.
   
AreEqual
   
(
    
$num
    !
,
  ! "
res
  # &
.
  & '
ToList
  ' -
(
  - .
)
  . /
.
  / 0
Count
  0 5
)
  5 6
;
  6 7
}
ÀÀ 
)
ÀÀ 
;
ÀÀ 
}
ÃÃ 	
[
ÕÕ 	

TestMethod
ÕÕ	 
]
ÕÕ 
public
ŒŒ 
void
ŒŒ 6
(GetByIngredientsIncAndExc_Should_Work_Ok
ŒŒ <
(
ŒŒ< =
)
ŒŒ= >
{
œœ 	
RunOnDatabase
–– 
(
–– 
async
–– 
s
––  !
=>
––" $
{
—— 
DestroyDatabase
““ 
(
““  
)
““  !
;
““! "
var
‘‘ 

fridgeRepo
‘‘ 
=
‘‘  
new
‘‘! $
FridgeRepository
‘‘% 5
(
‘‘5 6
s
‘‘6 7
)
‘‘7 8
;
‘‘8 9
var
’’ 
ingredCatRepo
’’ !
=
’’" #
new
’’$ '+
IngredientsCategoryRepository
’’( E
(
’’E F
s
’’F G
)
’’G H
;
’’H I
var
÷÷ 

ingredRepo
÷÷ 
=
÷÷  
new
÷÷! $#
IngredientsRepository
÷÷% :
(
÷÷: ;
s
÷÷; <
,
÷÷< =
ingredCatRepo
÷÷> K
,
÷÷K L

fridgeRepo
÷÷M W
)
÷÷W X
;
÷÷X Y
var
◊◊ 

recipeRepo
◊◊ 
=
◊◊  
new
◊◊! $
RecipesRepository
◊◊% 6
(
◊◊6 7
s
◊◊7 8
,
◊◊8 9

fridgeRepo
◊◊: D
,
◊◊D E

ingredRepo
◊◊F P
)
◊◊P Q
;
◊◊Q R
Populate
ŸŸ 
(
ŸŸ 
s
ŸŸ 
)
ŸŸ 
;
ŸŸ 
List
⁄⁄ 
<
⁄⁄ 

Ingredient
⁄⁄ 
>
⁄⁄  
igToAdd
⁄⁄! (
=
⁄⁄) *
new
⁄⁄+ .
List
⁄⁄/ 3
<
⁄⁄3 4

Ingredient
⁄⁄4 >
>
⁄⁄> ?
(
⁄⁄? @
)
⁄⁄@ A
;
⁄⁄A B
List
€€ 
<
€€ 

Ingredient
€€ 
>
€€  
igToExclude
€€! ,
=
€€- .
new
€€/ 2
List
€€3 7
<
€€7 8

Ingredient
€€8 B
>
€€B C
(
€€C D
)
€€D E
;
€€E F
igToAdd
‹‹ 
.
‹‹ 
Add
‹‹ 
(
‹‹ 

ingredRepo
‹‹ &
.
‹‹& '
	GetByName
‹‹' 0
(
‹‹0 1
$str
‹‹1 5
)
‹‹5 6
.
‹‹6 7
Result
‹‹7 =
.
‹‹= >
First
‹‹> C
(
‹‹C D
)
‹‹D E
)
‹‹E F
;
‹‹F G
igToAdd
›› 
.
›› 
Add
›› 
(
›› 

ingredRepo
›› &
.
››& '
	GetByName
››' 0
(
››0 1
$str
››1 5
)
››5 6
.
››6 7
Result
››7 =
.
››= >
First
››> C
(
››C D
)
››D E
)
››E F
;
››F G
var
ﬁﬁ 
res
ﬁﬁ 
=
ﬁﬁ 
await
ﬁﬁ 

recipeRepo
ﬁﬁ  *
.
ﬁﬁ* +
GetByIngredients
ﬁﬁ+ ;
(
ﬁﬁ; <
igToAdd
ﬁﬁ< C
,
ﬁﬁC D
igToExclude
ﬁﬁE P
,
ﬁﬁP Q

recipeRepo
ﬁﬁR \
.
ﬁﬁ\ ]
GetAll
ﬁﬁ] c
(
ﬁﬁc d
)
ﬁﬁd e
)
ﬁﬁe f
;
ﬁﬁf g
Assert
·· 
.
·· 
AreEqual
·· 
(
··  
$num
··  !
,
··! "
res
··# &
.
··& '
ToList
··' -
(
··- .
)
··. /
.
··/ 0
Count
··0 5
)
··5 6
;
··6 7
}
‚‚ 
)
‚‚ 
;
‚‚ 
}
„„ 	
[
‰‰ 	

TestMethod
‰‰	 
]
‰‰ 
public
ÂÂ 
void
ÂÂ 1
#GetByPreparationTime_Should_Work_Ok
ÂÂ 7
(
ÂÂ7 8
)
ÂÂ8 9
{
ÊÊ 	
RunOnDatabase
ÁÁ 
(
ÁÁ 
async
ÁÁ 
s
ÁÁ  !
=>
ÁÁ" $
{
ËË 
DestroyDatabase
ÈÈ 
(
ÈÈ  
)
ÈÈ  !
;
ÈÈ! "
var
ÎÎ 

fridgeRepo
ÎÎ 
=
ÎÎ  
new
ÎÎ! $
FridgeRepository
ÎÎ% 5
(
ÎÎ5 6
s
ÎÎ6 7
)
ÎÎ7 8
;
ÎÎ8 9
var
ÏÏ 
ingredCatRepo
ÏÏ !
=
ÏÏ" #
new
ÏÏ$ '+
IngredientsCategoryRepository
ÏÏ( E
(
ÏÏE F
s
ÏÏF G
)
ÏÏG H
;
ÏÏH I
var
ÌÌ 

ingredRepo
ÌÌ 
=
ÌÌ  
new
ÌÌ! $#
IngredientsRepository
ÌÌ% :
(
ÌÌ: ;
s
ÌÌ; <
,
ÌÌ< =
ingredCatRepo
ÌÌ> K
,
ÌÌK L

fridgeRepo
ÌÌM W
)
ÌÌW X
;
ÌÌX Y
var
ÓÓ 

recipeRepo
ÓÓ 
=
ÓÓ  
new
ÓÓ! $
RecipesRepository
ÓÓ% 6
(
ÓÓ6 7
s
ÓÓ7 8
,
ÓÓ8 9

fridgeRepo
ÓÓ: D
,
ÓÓD E

ingredRepo
ÓÓF P
)
ÓÓP Q
;
ÓÓQ R
Populate
 
(
 
s
 
)
 
;
 
var
ÚÚ 
res
ÚÚ 
=
ÚÚ 
await
ÚÚ 

recipeRepo
ÚÚ  *
.
ÚÚ* +"
GetByPrepatationTime
ÚÚ+ ?
(
ÚÚ? @
$num
ÚÚ@ B
,
ÚÚB C

recipeRepo
ÚÚD N
.
ÚÚN O
GetAll
ÚÚO U
(
ÚÚU V
)
ÚÚV W
)
ÚÚW X
;
ÚÚX Y
Assert
ıı 
.
ıı 
AreEqual
ıı 
(
ıı  
$num
ıı  !
,
ıı! "
res
ıı# &
.
ıı& '
ToList
ıı' -
(
ıı- .
)
ıı. /
.
ıı/ 0
Count
ıı0 5
)
ıı5 6
;
ıı6 7
}
ˆˆ 
)
ˆˆ 
;
ˆˆ 
}
˜˜ 	
[
¯¯ 	

TestMethod
¯¯	 
]
¯¯ 
public
˘˘ 
void
˘˘ (
GetByFilter_Should_Work_Ok
˘˘ .
(
˘˘. /
)
˘˘/ 0
{
˙˙ 	
RunOnDatabase
˚˚ 
(
˚˚ 
async
˚˚ 
s
˚˚  !
=>
˚˚" $
{
¸¸ 
DestroyDatabase
˝˝ 
(
˝˝  
)
˝˝  !
;
˝˝! "
var
ˇˇ 

fridgeRepo
ˇˇ 
=
ˇˇ  
new
ˇˇ! $
FridgeRepository
ˇˇ% 5
(
ˇˇ5 6
s
ˇˇ6 7
)
ˇˇ7 8
;
ˇˇ8 9
var
ÄÄ 
ingredCatRepo
ÄÄ !
=
ÄÄ" #
new
ÄÄ$ '+
IngredientsCategoryRepository
ÄÄ( E
(
ÄÄE F
s
ÄÄF G
)
ÄÄG H
;
ÄÄH I
var
ÅÅ 

ingredRepo
ÅÅ 
=
ÅÅ  
new
ÅÅ! $#
IngredientsRepository
ÅÅ% :
(
ÅÅ: ;
s
ÅÅ; <
,
ÅÅ< =
ingredCatRepo
ÅÅ> K
,
ÅÅK L

fridgeRepo
ÅÅM W
)
ÅÅW X
;
ÅÅX Y
var
ÇÇ 

recipeRepo
ÇÇ 
=
ÇÇ  
new
ÇÇ! $
RecipesRepository
ÇÇ% 6
(
ÇÇ6 7
s
ÇÇ7 8
,
ÇÇ8 9

fridgeRepo
ÇÇ: D
,
ÇÇD E

ingredRepo
ÇÇF P
)
ÇÇP Q
;
ÇÇQ R
Populate
ÑÑ 
(
ÑÑ 
s
ÑÑ 
)
ÑÑ 
;
ÑÑ 
var
ÖÖ 
filtru
ÖÖ 
=
ÖÖ 
new
ÖÖ  
Filter
ÖÖ! '
(
ÖÖ' (
)
ÖÖ( )
;
ÖÖ) *
filtru
àà 
.
àà 
Name
àà 
=
àà 
$str
àà "
;
àà" #
filtru
ââ 
.
ââ 
Cuisine
ââ 
=
ââ  
KitchenType
ââ! ,
.
ââ, -
Asian
ââ- 2
;
ââ2 3
filtru
ää 
.
ää 
PreparationTime
ää &
=
ää' (
$num
ää) +
;
ää+ ,
var
åå 
res
åå 
=
åå 
await
åå 

recipeRepo
åå  *
.
åå* +
GetByFilter
åå+ 6
(
åå6 7
filtru
åå7 =
)
åå= >
;
åå> ?
Assert
éé 
.
éé 
AreEqual
éé 
(
éé  
$num
éé  !
,
éé! "
res
éé# &
.
éé& '
ToList
éé' -
(
éé- .
)
éé. /
.
éé/ 0
Count
éé0 5
)
éé5 6
;
éé6 7
}
èè 
)
èè 
;
èè 
}
êê 	
}
ëë 
}íí ŒQ
sC:\Users\Turcu Nicusor\Desktop\Work\Anul 3\DotNet\KunFooD\SourceCode\KunFooD\IntegrationTests\UserRepositoryTest.cs
	namespace 	
IntegrationTests
 
{ 
[ 
	TestClass 
] 
public 

class 
UserRepositoryTest #
:$ %
BaseIntegrationTest& 9
{		 
[

 	

TestMethod

	 
]

 
public 
void E
9Given_Repository_When_AddingUser_Then_TheCount_ShouldBe_1 M
(M N
)N O
{ 	
RunOnDatabase 
( 
async 
s  !
=>" $
{ 
DestroyDatabase 
(  
)  !
;! "
var 

repository 
=  
new! $
UsersRepository% 4
(4 5
s5 6
)6 7
;7 8
var 
userList 
= 
GetDefaultUsers .
(. /
$num/ 0
)0 1
;1 2
foreach 
( 
var 
usr  
in! #
userList$ ,
), -
{ 
await 

repository $
.$ %
Add% (
(( )
usr) ,
), -
;- .
} 
var 
users 
= 

repository &
.& '
GetAll' -
(- .
). /
;/ 0
Assert 
. 
AreEqual 
(  
$num  !
,! "
users# (
.( )
Result) /
./ 0
ToList0 6
(6 7
)7 8
.8 9
Count9 >
)> ?
;? @
} 
) 
; 
} 	
[ 	

TestMethod	 
] 
public   
void   A
5Given_Repository_When_GetAll_Then_TheCount_ShouldBe_4   I
(  I J
)  J K
{!! 	
RunOnDatabase"" 
("" 
async"" 
s""  !
=>""" $
{## 
DestroyDatabase$$ 
($$  
)$$  !
;$$! "
var&& 

repository&& 
=&&  
new&&! $
UsersRepository&&% 4
(&&4 5
s&&5 6
)&&6 7
;&&7 8
var'' 
userList'' 
='' 
GetDefaultUsers'' .
(''. /
$num''/ 0
)''0 1
;''1 2
foreach** 
(** 
var** 
usr**  
in**! #
userList**$ ,
)**, -
{++ 
await,, 

repository,, $
.,,$ %
Add,,% (
(,,( )
usr,,) ,
),,, -
;,,- .
}-- 
var00 
users00 
=00 

repository00 &
.00& '
GetAll00' -
(00- .
)00. /
;00/ 0
Assert11 
.11 
AreEqual11 
(11  
$num11  !
,11! "
users11# (
.11( )
Result11) /
.11/ 0
ToList110 6
(116 7
)117 8
.118 9
Count119 >
)11> ?
;11? @
}22 
)22 
;22 
}33 	
[44 	

TestMethod44	 
]44 
public55 
void55 >
2Given_Repository_When_Delete_Then_ShouldBe_Correct55 F
(55F G
)55G H
{66 	
RunOnDatabase77 
(77 
async77 
s77  !
=>77" $
{88 
DestroyDatabase99 
(99  
)99  !
;99! "
var;; 

repository;; 
=;;  
new;;! $
UsersRepository;;% 4
(;;4 5
s;;5 6
);;6 7
;;;7 8
var<< 
user<< 
=<< 
GetDefaultUsers<< *
(<<* +
)<<+ ,
.<<, -
First<<- 2
(<<2 3
)<<3 4
;<<4 5
await?? 

repository??  
.??  !
Add??! $
(??$ %
user??% )
)??) *
;??* +
await@@ 

repository@@  
.@@  !
Delete@@! '
(@@' (
user@@( ,
.@@, -
Id@@- /
)@@/ 0
;@@0 1
varCC 
usersCC 
=CC 

repositoryCC &
.CC& '
GetAllCC' -
(CC- .
)CC. /
;CC/ 0
AssertDD 
.DD 
AreEqualDD 
(DD  
$numDD  !
,DD! "
usersDD# (
.DD( )
ResultDD) /
.DD/ 0
ToListDD0 6
(DD6 7
)DD7 8
.DD8 9
CountDD9 >
)DD> ?
;DD? @
}EE 
)EE 
;EE 
}FF 	
[GG 	

TestMethodGG	 
]GG 
publicHH 
voidHH >
2Given_Repository_When_Update_Then_ShouldBe_CorrectHH F
(HHF G
)HHG H
{II 	
RunOnDatabaseJJ 
(JJ 
asyncJJ 
sJJ  !
=>JJ" $
{KK 
DestroyDatabaseLL 
(LL  
)LL  !
;LL! "
varNN 

repositoryNN 
=NN  
newNN! $
UsersRepositoryNN% 4
(NN4 5
sNN5 6
)NN6 7
;NN7 8
varOO 
userOO 
=OO 
GetDefaultUsersOO *
(OO* +
)OO+ ,
.OO, -
FirstOO- 2
(OO2 3
)OO3 4
;OO4 5
awaitRR 

repositoryRR  
.RR  !
AddRR! $
(RR$ %
userRR% )
)RR) *
;RR* +
userSS 
.SS 
UpdateSS 
(SS 
$strSS &
,SS& '
trueSS( ,
,SS, -
$strSS. <
,SS< =
$strSS> J
,SSJ K
$strSSL \
,SS\ ]
$strSS^ k
)SSk l
;SSl m
awaitTT 

repositoryTT  
.TT  !
EditTT! %
(TT% &
userTT& *
)TT* +
;TT+ ,
varWW 
	addedUserWW 
=WW 

repositoryWW  *
.WW* +
FindByIdWW+ 3
(WW3 4
userWW4 8
.WW8 9
IdWW9 ;
)WW; <
;WW< =
AssertXX 
.XX 
AreEqualXX 
(XX  
	addedUserXX  )
.XX) *
ResultXX* 0
.XX0 1
UserNameXX1 9
,XX9 :
$strXX; E
)XXE F
;XXF G
}YY 
)YY 
;YY 
}ZZ 	
[[[ 	

TestMethod[[	 
][[ 
public\\ 
void\\ D
8Given_Repository_When_GetAdmins_Then_TheCount_ShouldBe_3\\ L
(\\L M
)\\M N
{]] 	
RunOnDatabase^^ 
(^^ 
async^^ 
s^^  !
=>^^" $
{__ 
DestroyDatabase`` 
(``  
)``  !
;``! "
varbb 

repositorybb 
=bb  
newbb! $
UsersRepositorybb% 4
(bb4 5
sbb5 6
)bb6 7
;bb7 8
varcc 
userListcc 
=cc 
GetDefaultUserscc .
(cc. /
$numcc/ 0
)cc0 1
;cc1 2
foreachff 
(ff 
varff 
usrff  
inff! #
userListff$ ,
)ff, -
{gg 
awaithh 

repositoryhh $
.hh$ %
Addhh% (
(hh( )
usrhh) ,
)hh, -
;hh- .
}ii 
varll 
usersll 
=ll 

repositoryll &
.ll& '
	GetAdminsll' 0
(ll0 1
)ll1 2
;ll2 3
Assertmm 
.mm 
AreEqualmm 
(mm  
$nummm  !
,mm! "
usersmm# (
.mm( )
Resultmm) /
.mm/ 0
ToListmm0 6
(mm6 7
)mm7 8
.mm8 9
Countmm9 >
)mm> ?
;mm? @
}nn 
)nn 
;nn 
}oo 	
[qq 	

TestMethodqq	 
]qq 
publicrr 
voidrr ,
 GetByEmail_Should_Return_Correctrr 4
(rr4 5
)rr5 6
{ss 	
RunOnDatabasett 
(tt 
asynctt 
stt  !
=>tt" $
{uu 
DestroyDatabasevv 
(vv  
)vv  !
;vv! "
varxx 
userRepositoryxx "
=xx# $
newxx% (
UsersRepositoryxx) 8
(xx8 9
sxx9 :
)xx: ;
;xx; <
Populate{{ 
({{ 
s{{ 
){{ 
;{{ 
var|| 
data|| 
=|| 
await||  
userRepository||! /
.||/ 0

GetByEmail||0 :
(||: ;
$str||; J
)||J K
;||K L
Assert 
. 
AreEqual 
(  
data  $
.$ %
UserName% -
,- .
$str/ 3
)3 4
;4 5
}
ÄÄ 
)
ÄÄ 
;
ÄÄ 
}
ÅÅ 	
[
ÉÉ 	

TestMethod
ÉÉ	 
]
ÉÉ 
public
ÑÑ 
void
ÑÑ -
GetByName_Should_Return_Correct
ÑÑ 3
(
ÑÑ3 4
)
ÑÑ4 5
{
ÖÖ 	
RunOnDatabase
ÜÜ 
(
ÜÜ 
async
ÜÜ 
s
ÜÜ  !
=>
ÜÜ" $
{
áá 
DestroyDatabase
àà 
(
àà  
)
àà  !
;
àà! "
var
ää 
userRepository
ää "
=
ää# $
new
ää% (
UsersRepository
ää) 8
(
ää8 9
s
ää9 :
)
ää: ;
;
ää; <
Populate
çç 
(
çç 
s
çç 
)
çç 
;
çç 
var
éé 
data
éé 
=
éé 
await
éé  
userRepository
éé! /
.
éé/ 0
	GetByName
éé0 9
(
éé9 :
$str
éé: >
)
éé> ?
;
éé? @
Assert
ëë 
.
ëë 
AreEqual
ëë 
(
ëë  
data
ëë  $
.
ëë$ %
Email
ëë% *
,
ëë* +
$str
ëë, ;
)
ëë; <
;
ëë< =
}
íí 
)
íí 
;
íí 
}
ìì 	
}
îî 
}ïï 